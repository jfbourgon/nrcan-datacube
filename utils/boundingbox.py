#!/usr/bin/env python

import argparse

import json
import fiona
from shapely.geometry import shape, box
import shapely.wkt

def get_feature(ds, fid):
    # read only the selected feature from the dataset
    f = ds[fid]
    assert f != None,"Feature not found"
    return f

def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('--format', default='wkt', help='output format')
    parser.add_argument('--fid', default=0, help='feature id')
    parser.add_argument('input', metavar='input', help='path to dataset')
    args = parser.parse_args()
    
    input = args.input
    fid = args.fid
    format = args.format

    # open the input dataset in read mode
    ds = fiona.open(input)

    f = get_feature(ds, fid)

    # convert bounds to Polygon
    bounds = shape(f['geometry']).bounds
    p = box(bounds[0], bounds[1], bounds[2], bounds[3])

    geom = shapely.wkt.loads(p.wkt)
    if format.lower() == 'geojson':
        geojson = shapely.geometry.mapping(geom)
        geom = json.dumps(geojson)
        
    print(geom)

if __name__ == "__main__":
    main()










































































































































































































































































































































































